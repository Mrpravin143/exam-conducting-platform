{% extends "adminbase.html" %}
{% block title %}Admin Dashboard{% endblock %}

{% block content %}
<div class="content-inner">
    <div class="card shadow p-4">
        <h2 class="mb-4 text-center">ðŸ“Š Exam Statistics</h2>

        <!-- Top Stats -->
        <div class="row g-3 text-center">
            <div class="col-md-3 col-6">
                <div class="card shadow-sm p-3">
                    <h4>{{ total_exams }}</h4>
                    <p>Total Exams</p>
                </div>
            </div>
            <div class="col-md-3 col-6">
                <div class="card shadow-sm p-3">
                    <h4>{{ total_students }}</h4>
                    <p>Unique Students</p>
                </div>
            </div>
            <div class="col-md-3 col-6">
                <div class="card shadow-sm p-3">
                    <h4>{{ submission_rate|floatformat:2 }}%</h4>
                    <p>Submission Rate</p>
                </div>
            </div>
            <div class="col-md-3 col-6">
                <div class="card shadow-sm p-3">
                    <h4>{{ total_questions }}</h4>
                    <p>Total Questions</p>
                </div>
            </div>
        </div>

        <!-- Question Type -->
        <div class="row mt-4 g-3">
            <div class="col-md-6">
                <div class="card shadow-sm p-3 text-center">
                    <h5>MCQ Questions</h5>
                    <p>{{ mcq_count }}</p>
                </div>
            </div>
            <div class="col-md-6">
                <div class="card shadow-sm p-3 text-center">
                    <h5>Descriptive Questions</h5>
                    <p>{{ desc_count }}</p>
                </div>
            </div>
        </div>

        <!-- Exam Wise Stats -->
        <h3 class="mt-5 text-center">Exam Wise Insights</h3>
        <div class="table-responsive mt-3">
            <table class="table table-striped table-bordered align-middle text-center">
                <thead class="table-dark">
                    <tr>
                        <th>Exam</th>
                        <th>Students</th>
                        <th>Submitted</th>
                        <th>Avg Marks</th>
                        <th>Max</th>
                        <th>Min</th>
                    </tr>
                </thead>
                <tbody>
                    {% for exam in exams_stats %}
                    <tr>
                        <td>{{ exam.title }}</td>
                        <td>{{ exam.total_students }}</td>
                        <td>{{ exam.submitted }}</td>
                        <td>{{ exam.avg_marks|default:"-" }}</td>
                        <td>{{ exam.max_marks|default:"-" }}</td>
                        <td>{{ exam.min_marks|default:"-" }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>
{% endblock %}
